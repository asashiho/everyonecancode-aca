<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Challenge 7: Chat Bot | Everyone Can Code</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/everyonecancode-aca/instructions/assets/css/0.styles.b083f342.css" as="style"><link rel="preload" href="/everyonecancode-aca/instructions/assets/js/app.06589b4a.js" as="script"><link rel="preload" href="/everyonecancode-aca/instructions/assets/js/2.f1fc85b6.js" as="script"><link rel="preload" href="/everyonecancode-aca/instructions/assets/js/1.52cd3120.js" as="script"><link rel="preload" href="/everyonecancode-aca/instructions/assets/js/23.610e08e6.js" as="script"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/10.7284a06c.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/11.9892bebe.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/12.0f622e1a.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/13.fd649836.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/14.9e10da08.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/15.b91d239c.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/16.1131d3bf.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/17.5ddbdf7d.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/18.4645a6c1.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/19.588f2ddf.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/20.06c7e391.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/21.a8fa5424.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/22.a2e67293.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/24.09d8375c.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/25.777182bc.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/26.e50af023.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/27.f19df26a.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/28.d7c4b409.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/29.1260ccd5.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/3.f25d86f0.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/30.3b403304.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/31.c6d5c2fc.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/32.bc8dca89.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/33.e1161a0a.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/34.f1516c82.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/35.54ba20f5.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/36.cce38db1.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/37.095fa2f9.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/4.fefac95f.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/5.f8144022.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/6.69d479a8.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/7.c4915675.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/vendors~docsearch.b614638c.js">
    <link rel="stylesheet" href="/everyonecancode-aca/instructions/assets/css/0.styles.b083f342.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/everyonecancode-aca/instructions/" class="home-link router-link-active"><!----> <span class="site-name">Everyone Can Code</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/everyonecancode-aca/instructions/instructions/en/day2/Chat/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ja
</a></li><li class="dropdown-item"><!----> <a href="/everyonecancode-aca/instructions/en/" class="nav-link">
  en
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/everyonecancode-aca/instructions/instructions/en/day2/Chat/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ja
</a></li><li class="dropdown-item"><!----> <a href="/everyonecancode-aca/instructions/en/" class="nav-link">
  en
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/everyonecancode-aca/instructions/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day1/GitHub/" class="sidebar-link">課題1: GitHub</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day1/ApplicationPart1/" class="sidebar-link">課題2：コードの変更とプルリクエストの作成とマージ</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day1/ApplicationPart2/" class="sidebar-link">課題3：Azureでアプリケーションを動かしてみよう</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day1/ApplicationPart3/" class="sidebar-link">課題4: GitHub Copilot</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Vision/" class="sidebar-link">課題5:オブジェクト認識</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Speech/" class="sidebar-link">課題6: 音声認識</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/" class="sidebar-link">課題7: 生成AI Chat Bot</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="challenge-7-chat-bot"><a href="#challenge-7-chat-bot" class="header-anchor">#</a> Challenge 7: Chat Bot</h1> <p>⏲️ <em>est. time to complete: 30 min.</em> ⏲️</p> <h2 id="here-is-what-you-will-learn-🎯"><a href="#here-is-what-you-will-learn-🎯" class="header-anchor">#</a> Here is what you will learn 🎯</h2> <p>In this challenge you will learn how to:</p> <ul><li>Create an OpenAI service in Azure</li> <li>Deploy an OpenAI model and connect it to your app</li> <li>Pass the API key to your app using GitHub Secrets</li> <li>Start chatting with model powered assistant in the app</li></ul> <h2 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table Of Contents</h2> <ol><li><a href="#getting-started">Getting Started</a></li> <li><a href="#create-openai-azure-service-instance">Create OpenAI Azure service instance</a></li> <li><a href="#deploying-openai-large-language-model">Deploying openAI Large Language Model</a></li> <li><a href="#azure-openai-credentials">Azure OpenAI credentials</a></li> <li><a href="#run-frontend-pipeline-again">Run Frontend Pipeline again</a></li></ol> <h3 id="further-informative-resources"><a href="#further-informative-resources" class="header-anchor">#</a> Further informative resources</h3> <ul><li><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/" target="_blank" rel="noopener noreferrer">Azure OpenAI Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting started</h2> <ul><li><p>Navigate to your <strong>Resource Group</strong> we created on Day 1 during the previous challenges again</p></li> <li><p>Create a new <strong>Resource</strong> and search for <strong>Azure OpenAI</strong></p> <p><img src="/everyonecancode-aca/instructions/assets/img/resource-azure-openai.b9385411.png" alt="Screenshot of how to create a resource"></p></li></ul> <h2 id="create-openai-azure-service-instance"><a href="#create-openai-azure-service-instance" class="header-anchor">#</a> Create OpenAI Azure service instance</h2> <ul><li>Select <strong>Azure OpenAI</strong> and hit <strong>Create</strong>.</li> <li>Your subscription and resource group should already be set. Select <strong>westeurope</strong> as region and <strong>Standard S0</strong>.</li> <li>Give the resource a unique name.</li> <li>Hit <strong>Next</strong> and in network you should select &quot;All networks, including the internet, can access this resource.&quot;</li> <li>Hit <strong>Next</strong> twice and create the resource
<img src="/everyonecancode-aca/instructions/assets/img/resource-azure-openai-settings.8b57cf3f.png" alt="Screenshot of Azure Portal create page for openAI Azure"> <img src="/everyonecancode-aca/instructions/assets/img/resource-azure-openai-network.16c834ef.png" alt="Screenshot of Azure Portal create page for openAI Azure, networking"></li></ul> <h2 id="deploying-openai-large-language-model"><a href="#deploying-openai-large-language-model" class="header-anchor">#</a> Deploying openAI Large Language Model</h2> <ul><li><p>Go to the Azure openAI resource you created and click on <strong>Model deployments</strong></p></li> <li><p>Next, click on <strong>Create new deployment</strong> here we will choose the OpenAI model we want to deploy</p></li> <li><p>Select model <strong>gpt-35-turbo</strong> and model version <strong>Auto-update to default</strong></p></li> <li><p>Give a unique name to your deployment name then click on create</p> <p><img src="/everyonecancode-aca/instructions/assets/img/gpt-turbo-deployment.b06a53fd.png" alt="Screenshot of Gpt turbo model deployment"></p></li></ul> <p>Congratulations! You just deployed an instance of the openAI gpt turbo model, we will later add this model to our Milligram app to build a chat bot. For now you can actually test it out inside azure and ask it a few questions. Go to the model you deployed and click on <strong>Open in Playground</strong>, there you can chat with the chat assistant. You can also change the parameters of the model under <strong>Configuration &gt; Parameters</strong></p> <p><img src="/everyonecancode-aca/instructions/assets/img/gpt-playground.26f96025.png" alt="Screenshot of Gpt turbo model playground"></p> <h2 id="azure-openai-credentials"><a href="#azure-openai-credentials" class="header-anchor">#</a> Azure OpenAI credentials</h2> <p>In order to connect our user interface with the openAI model, we need to integrate the openAI credentials in the process. For this, there are 2 options. We can add our keys in the Azure web app (Option 1) or we can automate it by adding the keys in our github workflow.</p> <h3 id="option-1-add-openai-azure-credentials-to-web-app"><a href="#option-1-add-openai-azure-credentials-to-web-app" class="header-anchor">#</a> Option 1: Add OpenAI Azure credentials to web app</h3> <p>Go back to Azure and open the Milligram web app again:</p> <ul><li>Go to <strong>environment variables</strong></li> <li>Create new variable with name <strong>CHAT_API_KEY</strong> and paste Key 1</li> <li>Create another variable with name <strong>CHAT_API_ENDPOINT</strong> and paste the endpoint url</li> <li>Finally create another variable with name <strong>AZURE_OPENAI_MODEL_NAME</strong> And paste the name you chose when you deployed the gpt turbo model.</li></ul> <p><img src="/everyonecancode-aca/instructions/assets/img/milligram-env-vars.a7283e2c.png" alt="Screenshot of Gpt turbo model playground"></p> <h3 id="option-2-integrate-openai-azure-credentials-into-github-secret"><a href="#option-2-integrate-openai-azure-credentials-into-github-secret" class="header-anchor">#</a> Option 2: Integrate OpenAI Azure credentials into GitHub Secret</h3> <p>Similar to what we did in the challenges on Day 1 we now want to add the secret keys to Github</p> <ul><li>Go to the Azure openAI resource dashboard and click on <strong>Keys and Endpoint</strong></li> <li>On Github Go to your repository, <strong>Settings &gt; Secrets and Variables &gt; Actions</strong> then click on <strong>create new repository secret</strong></li> <li>Create new secret with name <strong>CHAT_API_KEY</strong> and paste Key 1</li> <li>Create another secret with name <strong>CHAT_API_ENDPOINT</strong> and paste the endpoint url</li> <li>Finally create another secret with name <strong>AZURE_OPENAI_MODEL_NAME</strong> And paste the name you chose when you deployed the gpt turbo model.</li></ul> <p>Now we also want to add the secrets to our github workflow:</p> <ol><li>Add the following code snippet under <code>subscription-id</code> around line 74 in the file located at <strong>.github/workflows/main_milligram.yml</strong></li></ol> <div class="language- extra-class"><pre class="language-text"><code>      - uses: azure/appservice-settings@v1
        with:
          app-name: 'milligram'
          slot-name: 'Production'  # Optional and needed only if the settings have to be configured on the specific deployment slot
          app-settings-json: '[{ &quot;name&quot;: &quot;CHAT_API_KEY&quot;, &quot;value&quot;: &quot;${{ secrets.CHAT_API_KEY }}&quot;, &quot;slotSetting&quot;: false }, { &quot;name&quot;: &quot;CHAT_API_ENDPOINT&quot;, &quot;value&quot;:  &quot;${{ secrets.CHAT_API_ENDPOINT }}&quot;, &quot;slotSetting&quot;: false }, { &quot;name&quot;: &quot;AZURE_OPENAI_MODEL_NAME&quot;, &quot;value&quot;: &quot;${{ secrets.AZURE_OPENAI_MODEL_NAME }}&quot;, &quot;slotSetting&quot;: false }]'
        id: settings
</code></pre></div><h2 id="run-frontend-pipeline-again"><a href="#run-frontend-pipeline-again" class="header-anchor">#</a> Run Frontend Pipeline again</h2> <ul><li>Navigate to <strong>Actions</strong> &gt; <strong>Pages</strong> and <strong>Run workflow</strong></li></ul> <p>Click on the frontend link displayed under the deploy step under your pipeline <code>https://&lt;yourgithubhandle&gt;.github.io/...</code> or open the app on your phone.</p> <p>Our frontend application should now have a new button with a chat symbol that allows us to chat with our assistant. The assistant is powered by the model we deployed through the Azure OpenAI service. Have a chat with your bot 🎉</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/everyonecancode-aca/instructions/assets/js/app.06589b4a.js" defer></script><script src="/everyonecancode-aca/instructions/assets/js/2.f1fc85b6.js" defer></script><script src="/everyonecancode-aca/instructions/assets/js/1.52cd3120.js" defer></script><script src="/everyonecancode-aca/instructions/assets/js/23.610e08e6.js" defer></script>
  </body>
</html>
