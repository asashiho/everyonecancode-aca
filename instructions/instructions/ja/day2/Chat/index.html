<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>課題7: 生成AI Chat Bot | Everyone Can Code</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/everyonecancode-aca/instructions/assets/css/0.styles.b083f342.css" as="style"><link rel="preload" href="/everyonecancode-aca/instructions/assets/js/app.06589b4a.js" as="script"><link rel="preload" href="/everyonecancode-aca/instructions/assets/js/2.f1fc85b6.js" as="script"><link rel="preload" href="/everyonecancode-aca/instructions/assets/js/1.52cd3120.js" as="script"><link rel="preload" href="/everyonecancode-aca/instructions/assets/js/19.588f2ddf.js" as="script"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/10.7284a06c.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/11.9892bebe.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/12.0f622e1a.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/13.fd649836.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/14.9e10da08.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/15.b91d239c.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/16.1131d3bf.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/17.5ddbdf7d.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/18.4645a6c1.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/20.06c7e391.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/21.a8fa5424.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/22.a2e67293.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/23.610e08e6.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/24.09d8375c.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/25.777182bc.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/26.e50af023.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/27.f19df26a.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/28.d7c4b409.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/29.1260ccd5.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/3.f25d86f0.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/30.3b403304.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/31.c6d5c2fc.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/32.bc8dca89.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/33.e1161a0a.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/34.f1516c82.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/35.54ba20f5.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/36.cce38db1.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/37.095fa2f9.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/4.fefac95f.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/5.f8144022.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/6.69d479a8.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/7.c4915675.js"><link rel="prefetch" href="/everyonecancode-aca/instructions/assets/js/vendors~docsearch.b614638c.js">
    <link rel="stylesheet" href="/everyonecancode-aca/instructions/assets/css/0.styles.b083f342.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/everyonecancode-aca/instructions/" class="home-link router-link-active"><!----> <span class="site-name">Everyone Can Code</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ja
</a></li><li class="dropdown-item"><!----> <a href="/everyonecancode-aca/instructions/en/" class="nav-link">
  en
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ja
</a></li><li class="dropdown-item"><!----> <a href="/everyonecancode-aca/instructions/en/" class="nav-link">
  en
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/everyonecancode-aca/instructions/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day1/GitHub/" class="sidebar-link">課題1: GitHub</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day1/ApplicationPart1/" class="sidebar-link">課題2：コードの変更とプルリクエストの作成とマージ</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day1/ApplicationPart2/" class="sidebar-link">課題3：Azureでアプリケーションを動かしてみよう</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day1/ApplicationPart3/" class="sidebar-link">課題4: GitHub Copilot</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Vision/" class="sidebar-link">課題5:オブジェクト認識</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Speech/" class="sidebar-link">課題6: 音声認識</a></li><li><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/" aria-current="page" class="active sidebar-link">課題7: 生成AI Chat Bot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/#このパートで学ぶこと-🎯" class="sidebar-link">このパートで学ぶこと 🎯</a></li><li class="sidebar-sub-header"><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/#目次" class="sidebar-link">目次</a></li><li class="sidebar-sub-header"><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/#azure-openai-service-インスタンスを作成します" class="sidebar-link">Azure OpenAI Service インスタンスを作成します</a></li><li class="sidebar-sub-header"><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/#azure-openaiの大規模言語モデルのデプロイ" class="sidebar-link">Azure OpenAIの大規模言語モデルのデプロイ</a></li><li class="sidebar-sub-header"><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/#azure-openai-の資格情報をgithub-secretに統合します" class="sidebar-link">Azure OpenAI の資格情報をGitHub Secretに統合します</a></li><li class="sidebar-sub-header"><a href="/everyonecancode-aca/instructions/instructions/ja/day2/Chat/#フロントエンドとバックエンドパイプラインを再実行します" class="sidebar-link">フロントエンドとバックエンドパイプラインを再実行します</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="課題7-生成ai-chat-bot"><a href="#課題7-生成ai-chat-bot" class="header-anchor">#</a> 課題7: 生成AI Chat Bot</h1> <p>⏲️ <em>完了までの時間: 30 min.</em> ⏲️</p> <h2 id="このパートで学ぶこと-🎯"><a href="#このパートで学ぶこと-🎯" class="header-anchor">#</a> このパートで学ぶこと 🎯</h2> <ul><li>Azure OpenAI service を作成します</li> <li>OpenAIモデルをデプロイしてアプリに接続します</li> <li>GitHub Secrets を使用してAPIキーをアプリに渡します</li> <li>アプリで生成AIとのチャットを開始します</li></ul> <h2 id="目次"><a href="#目次" class="header-anchor">#</a> 目次</h2> <ul><li><a href="#%E8%AA%B2%E9%A1%8C7-%E7%94%9F%E6%88%90ai-chat-bot">課題7: 生成AI Chat Bot</a> <ul><li><a href="#%E3%81%93%E3%81%AE%E3%83%91%E3%83%BC%E3%83%88%E3%81%A7%E5%AD%A6%E3%81%B6%E3%81%93%E3%81%A8-">このパートで学ぶこと 🎯</a></li> <li><a href="#%E7%9B%AE%E6%AC%A1">目次</a> <ul><li><a href="#%E5%8F%82%E8%80%83%E6%83%85%E5%A0%B1">参考情報</a></li></ul></li> <li><a href="#azure-openai-service-%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97%E3%81%BE%E3%81%99">Azure OpenAI Service インスタンスを作成します</a></li> <li><a href="#azure-openai%E3%81%AE%E5%A4%A7%E8%A6%8F%E6%A8%A1%E8%A8%80%E8%AA%9E%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4">Azure OpenAIの大規模言語モデルのデプロイ</a></li> <li><a href="#azure-openai-%E3%81%AE%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%82%92github-secret%E3%81%AB%E7%B5%B1%E5%90%88%E3%81%97%E3%81%BE%E3%81%99">Azure OpenAI の資格情報をGitHub Secretに統合します</a></li> <li><a href="#%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E3%81%A8%E3%83%90%E3%83%83%E3%82%AF%E3%82%A8%E3%83%B3%E3%83%89%E3%83%91%E3%82%A4%E3%83%97%E3%83%A9%E3%82%A4%E3%83%B3%E3%82%92%E5%86%8D%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%BE%E3%81%99">フロントエンドとバックエンドパイプラインを再実行します</a></li></ul></li></ul> <h3 id="参考情報"><a href="#参考情報" class="header-anchor">#</a> 参考情報</h3> <ul><li><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/" target="_blank" rel="noopener noreferrer">Azure OpenAI ドキュメント<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="azure-openai-service-インスタンスを作成します"><a href="#azure-openai-service-インスタンスを作成します" class="header-anchor">#</a> Azure OpenAI Service インスタンスを作成します</h2> <ol><li><p>Azureポータルを開き、以前のチャレンジで作成したリソースグループに移動します。</p></li> <li><p><strong>Azure OpenAI</strong> を検索し、新しいリソース作成します。
<strong>「Azure OpenAI」</strong> を選択し、<strong>Create</strong> をクリックして以下の値を登録します。</p> <p><img src="/everyonecancode-aca/instructions/assets/img/resource-azure-openai.b9385411.png" alt="Screenshot of how to create a resource"></p> <ul><li>サブスクリプションとリソースグループを選択します。</li> <li>リージョンは <strong><code>West Europe</code></strong> にします。また、**<code>Standard S0</code>**を選択します。</li> <li>リソースにグローバルで一意の名前を付けます。</li> <li><ul><li><strong>[Next]</strong> をクリックして、ネットワークで <strong>「インターネットを含むすべてのネットワークがこのリソースにアクセスできる」</strong> を選択してください。</li></ul></li> <li><strong>[Next]</strong> をクリックしてリソースを作成します
<img src="/everyonecancode-aca/instructions/assets/img/resource-azure-openai-settings.8b57cf3f.png" alt="Screenshot of Azure Portal create page for openAI Azure"> <img src="/everyonecancode-aca/instructions/assets/img/resource-azure-openai-network.16c834ef.png" alt="Screenshot of Azure Portal create page for openAI Azure, networking"></li></ul></li></ol> <h2 id="azure-openaiの大規模言語モデルのデプロイ"><a href="#azure-openaiの大規模言語モデルのデプロイ" class="header-anchor">#</a> Azure OpenAIの大規模言語モデルのデプロイ</h2> <p>これで、Azure OpenAI Serviceのリソースが作成できたので、次は大規模言語モデルをデプロイします。</p> <ol><li><p>作成したAzure openAI リソースに移動して、<strong>[Model deployments]</strong> をクリックします。
<img src="/everyonecancode-aca/instructions/assets/img/model-deploy1.13d2b8fa.png" alt=""></p></li> <li><p>次に、 <strong>[Create new deployment]</strong> をクリックします。
<img src="/everyonecancode-aca/instructions/assets/img/model-deploy2.712ce63e.png" alt=""></p></li> <li><p>ここでは、展開するOpenAIモデルを選択します。デプロイ名に一意の名前を付けて、<strong>[create]</strong> をクリックします。この名前は後で使用するので、ひかえておいてください。</p> <table><thead><tr><th>設定項目</th> <th>値</th></tr></thead> <tbody><tr><td>モデル</td> <td><strong>gpt-35-turbo</strong></td></tr> <tr><td>モデルバージョン</td> <td><strong>Auto-update to default</strong></td></tr></tbody></table></li></ol> <p><img src="/everyonecancode-aca/instructions/assets/img/gpt-turbo-deployment.b06a53fd.png" alt="Screenshot of Gpt turbo model deployment"></p> <p>これで実際にAzure内で生成AIとのチャットを試すことができます。</p> <p>デプロイしたモデルに移動して、<strong>[Open in Playground]</strong> をクリックすると、チャットアシスタントとチャットできるプレイグラウンドが表示されます。</p> <p><strong>[Configuration] &gt; [Parameters]</strong> の下でトークン数などのモデルのパラメーターを変更することもできます。</p> <p><img src="/everyonecancode-aca/instructions/assets/img/gpt-playground.26f96025.png" alt="Screenshot of Gpt turbo model playground"></p> <h2 id="azure-openai-の資格情報をgithub-secretに統合します"><a href="#azure-openai-の資格情報をgithub-secretに統合します" class="header-anchor">#</a> Azure OpenAI の資格情報をGitHub Secretに統合します</h2> <p>Milligramアプリケーションにチャット機能を追加するには、Azure OpenAI の資格情報を統合する必要があります。</p> <p>前の課題と同様に、3つのGitHub Secretを追加します。</p> <ol><li><p>AzureポータルからAzure OpenAIに作成したリソースを開きます。そして、**[Keys and Endpoint]**をクリックします。ここで、キーとエンドポイントをひかえます。</p></li> <li><p>次にブラウザでGitHubのリポジトリを開きます。<strong>[GitHub] -&gt; [Settings] -&gt; [Secrets] -&gt; [Actions]</strong> に移動し、<strong>[New repository secret]</strong> を追加します。</p></li></ol> <p>次の３つのシークレットを追加します。</p> <table><thead><tr><th>Name</th> <th>Value</th></tr></thead> <tbody><tr><td>VITE_CHAT_API_KEY</td> <td>Azure AI servicesのKey</td></tr> <tr><td>VITE_CHAT_API_ENDPOINT</td> <td>Azure AI servicesのEndpoint</td></tr> <tr><td>VITE_AZURE_OPENAI_MODEL_NAME</td> <td>Azure AI servicesのモデル名</td></tr></tbody></table> <ol start="3"><li>次に、GitHubワークフローにシークレットを追加します。
<code>.github/workflows/main_&lt;ご自身のWebアプリのリソース名&gt;.yml</code> にあるファイルの74行目あたりにある <code>subscription-id</code> の下に次のコードスニペットを追加します。</li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code>      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> azure/appservice<span class="token punctuation">-</span>settings@v1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">app-name</span><span class="token punctuation">:</span> <span class="token string">'ご自身のWebAppsのアプリ名'</span>
          <span class="token key atrule">slot-name</span><span class="token punctuation">:</span> <span class="token string">'Production'</span>  <span class="token comment"># Optional and needed only if the settings have to be configured on the specific deployment slot</span>
          <span class="token key atrule">app-settings-json</span><span class="token punctuation">:</span> <span class="token string">'[{ &quot;name&quot;: &quot;CHAT_API_KEY&quot;, &quot;value&quot;: &quot;${{ secrets.VITE_CHAT_API_KEY }}&quot;, &quot;slotSetting&quot;: false }, { &quot;name&quot;: &quot;CHAT_API_ENDPOINT&quot;, &quot;value&quot;:  &quot;${{ secrets.VITE_CHAT_API_ENDPOINT }}&quot;, &quot;slotSetting&quot;: false }, { &quot;name&quot;: &quot;AZURE_OPENAI_MODEL_NAME&quot;, &quot;value&quot;: &quot;${{ secrets.VITE_AZURE_OPENAI_MODEL_NAME }}&quot;, &quot;slotSetting&quot;: false }]'</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span> settings
</code></pre></div><h2 id="フロントエンドとバックエンドパイプラインを再実行します"><a href="#フロントエンドとバックエンドパイプラインを再実行します" class="header-anchor">#</a> フロントエンドとバックエンドパイプラインを再実行します</h2> <p>登録したシークレットを追加するには、ビルドパイプラインを再度実行する必要があります。</p> <ul><li><strong>[Actions] -&gt; [Pages]</strong> を開き <strong>Run workflow</strong> をクリックします。</li> <li><strong>[Actions] -&gt; [Build and deploy Python app to Azure Web App]</strong> を開き <strong>Run workflow</strong> をクリックします。</li></ul> <p>パイプラインの下にデプロイステップの下に表示されるフロントエンドのURLリンクをクリックするか、スマートフォンでアプリを更新します。</p> <p><code>https://&lt;ご自身のGitHubアカウント名&gt;.github.io/everyonecancode</code></p> <p><img src="/everyonecancode-aca/instructions/assets/img/aoai-chat.6c294394.png" alt=""></p> <p>フロントエンドアプリケーションには、アシスタントとチャットできるチャットボタンが表示されます。チャットのアシスタントは、Azure OpenAI でデプロイした大規模言語モデルが動いています。</p> <p>ぜひ最新の生成AIとのチャットを楽しんでください🤖</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/everyonecancode-aca/instructions/instructions/ja/day2/Speech/" class="prev">
        課題6: 音声認識
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/everyonecancode-aca/instructions/assets/js/app.06589b4a.js" defer></script><script src="/everyonecancode-aca/instructions/assets/js/2.f1fc85b6.js" defer></script><script src="/everyonecancode-aca/instructions/assets/js/1.52cd3120.js" defer></script><script src="/everyonecancode-aca/instructions/assets/js/19.588f2ddf.js" defer></script>
  </body>
</html>
