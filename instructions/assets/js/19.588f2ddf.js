(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{420:function(t,e,r){t.exports=r.p+"assets/img/resource-azure-openai.b9385411.png"},421:function(t,e,r){t.exports=r.p+"assets/img/resource-azure-openai-settings.8b57cf3f.png"},422:function(t,e,r){t.exports=r.p+"assets/img/resource-azure-openai-network.16c834ef.png"},423:function(t,e,r){t.exports=r.p+"assets/img/model-deploy1.13d2b8fa.png"},424:function(t,e,r){t.exports=r.p+"assets/img/model-deploy2.712ce63e.png"},425:function(t,e,r){t.exports=r.p+"assets/img/gpt-turbo-deployment.b06a53fd.png"},426:function(t,e,r){t.exports=r.p+"assets/img/gpt-playground.26f96025.png"},427:function(t,e,r){t.exports=r.p+"assets/img/aoai-chat.6c294394.png"},461:function(t,e,r){"use strict";r.r(e);var s=r(10),a=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"課題7-生成ai-chat-bot"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#課題7-生成ai-chat-bot"}},[t._v("#")]),t._v(" 課題7: 生成AI Chat Bot")]),t._v(" "),e("p",[t._v("⏲️ "),e("em",[t._v("完了までの時間: 30 min.")]),t._v(" ⏲️")]),t._v(" "),e("h2",{attrs:{id:"このパートで学ぶこと-🎯"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#このパートで学ぶこと-🎯"}},[t._v("#")]),t._v(" このパートで学ぶこと 🎯")]),t._v(" "),e("ul",[e("li",[t._v("Azure OpenAI service を作成します")]),t._v(" "),e("li",[t._v("OpenAIモデルをデプロイしてアプリに接続します")]),t._v(" "),e("li",[t._v("GitHub Secrets を使用してAPIキーをアプリに渡します")]),t._v(" "),e("li",[t._v("アプリで生成AIとのチャットを開始します")])]),t._v(" "),e("h2",{attrs:{id:"目次"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目次"}},[t._v("#")]),t._v(" 目次")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E8%AA%B2%E9%A1%8C7-%E7%94%9F%E6%88%90ai-chat-bot"}},[t._v("課題7: 生成AI Chat Bot")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E3%81%93%E3%81%AE%E3%83%91%E3%83%BC%E3%83%88%E3%81%A7%E5%AD%A6%E3%81%B6%E3%81%93%E3%81%A8-"}},[t._v("このパートで学ぶこと 🎯")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#%E7%9B%AE%E6%AC%A1"}},[t._v("目次")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E6%83%85%E5%A0%B1"}},[t._v("参考情報")])])])]),t._v(" "),e("li",[e("a",{attrs:{href:"#azure-openai-service-%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97%E3%81%BE%E3%81%99"}},[t._v("Azure OpenAI Service インスタンスを作成します")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#azure-openai%E3%81%AE%E5%A4%A7%E8%A6%8F%E6%A8%A1%E8%A8%80%E8%AA%9E%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4"}},[t._v("Azure OpenAIの大規模言語モデルのデプロイ")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#azure-openai-%E3%81%AE%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%82%92github-secret%E3%81%AB%E7%B5%B1%E5%90%88%E3%81%97%E3%81%BE%E3%81%99"}},[t._v("Azure OpenAI の資格情報をGitHub Secretに統合します")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89%E3%81%A8%E3%83%90%E3%83%83%E3%82%AF%E3%82%A8%E3%83%B3%E3%83%89%E3%83%91%E3%82%A4%E3%83%97%E3%83%A9%E3%82%A4%E3%83%B3%E3%82%92%E5%86%8D%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%BE%E3%81%99"}},[t._v("フロントエンドとバックエンドパイプラインを再実行します")])])])])]),t._v(" "),e("h3",{attrs:{id:"参考情報"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考情報"}},[t._v("#")]),t._v(" 参考情報")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://learn.microsoft.com/en-us/azure/ai-services/openai/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Azure OpenAI ドキュメント"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"azure-openai-service-インスタンスを作成します"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#azure-openai-service-インスタンスを作成します"}},[t._v("#")]),t._v(" Azure OpenAI Service インスタンスを作成します")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Azureポータルを開き、以前のチャレンジで作成したリソースグループに移動します。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("Azure OpenAI")]),t._v(" を検索し、新しいリソース作成します。\n"),e("strong",[t._v("「Azure OpenAI」")]),t._v(" を選択し、"),e("strong",[t._v("Create")]),t._v(" をクリックして以下の値を登録します。")]),t._v(" "),e("p",[e("img",{attrs:{src:r(420),alt:"Screenshot of how to create a resource"}})]),t._v(" "),e("ul",[e("li",[t._v("サブスクリプションとリソースグループを選択します。")]),t._v(" "),e("li",[t._v("リージョンは "),e("strong",[e("code",[t._v("West Europe")])]),t._v(" にします。また、**"),e("code",[t._v("Standard S0")]),t._v("**を選択します。")]),t._v(" "),e("li",[t._v("リソースにグローバルで一意の名前を付けます。")]),t._v(" "),e("li",[e("ul",[e("li",[e("strong",[t._v("[Next]")]),t._v(" をクリックして、ネットワークで "),e("strong",[t._v("「インターネットを含むすべてのネットワークがこのリソースにアクセスできる」")]),t._v(" を選択してください。")])])]),t._v(" "),e("li",[e("strong",[t._v("[Next]")]),t._v(" をクリックしてリソースを作成します\n"),e("img",{attrs:{src:r(421),alt:"Screenshot of Azure Portal create page for openAI Azure"}}),t._v(" "),e("img",{attrs:{src:r(422),alt:"Screenshot of Azure Portal create page for openAI Azure, networking"}})])])])]),t._v(" "),e("h2",{attrs:{id:"azure-openaiの大規模言語モデルのデプロイ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#azure-openaiの大規模言語モデルのデプロイ"}},[t._v("#")]),t._v(" Azure OpenAIの大規模言語モデルのデプロイ")]),t._v(" "),e("p",[t._v("これで、Azure OpenAI Serviceのリソースが作成できたので、次は大規模言語モデルをデプロイします。")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("作成したAzure openAI リソースに移動して、"),e("strong",[t._v("[Model deployments]")]),t._v(" をクリックします。\n"),e("img",{attrs:{src:r(423),alt:""}})])]),t._v(" "),e("li",[e("p",[t._v("次に、 "),e("strong",[t._v("[Create new deployment]")]),t._v(" をクリックします。\n"),e("img",{attrs:{src:r(424),alt:""}})])]),t._v(" "),e("li",[e("p",[t._v("ここでは、展開するOpenAIモデルを選択します。デプロイ名に一意の名前を付けて、"),e("strong",[t._v("[create]")]),t._v(" をクリックします。この名前は後で使用するので、ひかえておいてください。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("設定項目")]),t._v(" "),e("th",[t._v("値")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("モデル")]),t._v(" "),e("td",[e("strong",[t._v("gpt-35-turbo")])])]),t._v(" "),e("tr",[e("td",[t._v("モデルバージョン")]),t._v(" "),e("td",[e("strong",[t._v("Auto-update to default")])])])])])])]),t._v(" "),e("p",[e("img",{attrs:{src:r(425),alt:"Screenshot of Gpt turbo model deployment"}})]),t._v(" "),e("p",[t._v("これで実際にAzure内で生成AIとのチャットを試すことができます。")]),t._v(" "),e("p",[t._v("デプロイしたモデルに移動して、"),e("strong",[t._v("[Open in Playground]")]),t._v(" をクリックすると、チャットアシスタントとチャットできるプレイグラウンドが表示されます。")]),t._v(" "),e("p",[e("strong",[t._v("[Configuration] > [Parameters]")]),t._v(" の下でトークン数などのモデルのパラメーターを変更することもできます。")]),t._v(" "),e("p",[e("img",{attrs:{src:r(426),alt:"Screenshot of Gpt turbo model playground"}})]),t._v(" "),e("h2",{attrs:{id:"azure-openai-の資格情報をgithub-secretに統合します"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#azure-openai-の資格情報をgithub-secretに統合します"}},[t._v("#")]),t._v(" Azure OpenAI の資格情報をGitHub Secretに統合します")]),t._v(" "),e("p",[t._v("Milligramアプリケーションにチャット機能を追加するには、Azure OpenAI の資格情報を統合する必要があります。")]),t._v(" "),e("p",[t._v("前の課題と同様に、3つのGitHub Secretを追加します。")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("AzureポータルからAzure OpenAIに作成したリソースを開きます。そして、**[Keys and Endpoint]**をクリックします。ここで、キーとエンドポイントをひかえます。")])]),t._v(" "),e("li",[e("p",[t._v("次にブラウザでGitHubのリポジトリを開きます。"),e("strong",[t._v("[GitHub] -> [Settings] -> [Secrets] -> [Actions]")]),t._v(" に移動し、"),e("strong",[t._v("[New repository secret]")]),t._v(" を追加します。")])])]),t._v(" "),e("p",[t._v("次の３つのシークレットを追加します。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Value")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("VITE_CHAT_API_KEY")]),t._v(" "),e("td",[t._v("Azure AI servicesのKey")])]),t._v(" "),e("tr",[e("td",[t._v("VITE_CHAT_API_ENDPOINT")]),t._v(" "),e("td",[t._v("Azure AI servicesのEndpoint")])]),t._v(" "),e("tr",[e("td",[t._v("VITE_AZURE_OPENAI_MODEL_NAME")]),t._v(" "),e("td",[t._v("Azure AI servicesのモデル名")])])])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("次に、GitHubワークフローにシークレットを追加します。\n"),e("code",[t._v(".github/workflows/main_<ご自身のWebアプリのリソース名>.yml")]),t._v(" にあるファイルの74行目あたりにある "),e("code",[t._v("subscription-id")]),t._v(" の下に次のコードスニペットを追加します。")])]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[t._v("      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" azure/appservice"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("settings@v1\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app-name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ご自身のWebAppsのアプリ名'")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("slot-name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Production'")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Optional and needed only if the settings have to be configured on the specific deployment slot")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app-settings-json")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'[{ "name": "CHAT_API_KEY", "value": "${{ secrets.VITE_CHAT_API_KEY }}", "slotSetting": false }, { "name": "CHAT_API_ENDPOINT", "value":  "${{ secrets.VITE_CHAT_API_ENDPOINT }}", "slotSetting": false }, { "name": "AZURE_OPENAI_MODEL_NAME", "value": "${{ secrets.VITE_AZURE_OPENAI_MODEL_NAME }}", "slotSetting": false }]\'')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" settings\n")])])]),e("h2",{attrs:{id:"フロントエンドとバックエンドパイプラインを再実行します"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#フロントエンドとバックエンドパイプラインを再実行します"}},[t._v("#")]),t._v(" フロントエンドとバックエンドパイプラインを再実行します")]),t._v(" "),e("p",[t._v("登録したシークレットを追加するには、ビルドパイプラインを再度実行する必要があります。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("[Actions] -> [Pages]")]),t._v(" を開き "),e("strong",[t._v("Run workflow")]),t._v(" をクリックします。")]),t._v(" "),e("li",[e("strong",[t._v("[Actions] -> [Build and deploy Python app to Azure Web App]")]),t._v(" を開き "),e("strong",[t._v("Run workflow")]),t._v(" をクリックします。")])]),t._v(" "),e("p",[t._v("パイプラインの下にデプロイステップの下に表示されるフロントエンドのURLリンクをクリックするか、スマートフォンでアプリを更新します。")]),t._v(" "),e("p",[e("code",[t._v("https://<ご自身のGitHubアカウント名>.github.io/everyonecancode")])]),t._v(" "),e("p",[e("img",{attrs:{src:r(427),alt:""}})]),t._v(" "),e("p",[t._v("フロントエンドアプリケーションには、アシスタントとチャットできるチャットボタンが表示されます。チャットのアシスタントは、Azure OpenAI でデプロイした大規模言語モデルが動いています。")]),t._v(" "),e("p",[t._v("ぜひ最新の生成AIとのチャットを楽しんでください🤖")])])}),[],!1,null,null,null);e.default=a.exports}}]);